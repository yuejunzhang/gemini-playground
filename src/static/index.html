<!--
//Author: ChrisKyle
//Project: https://github.com/ViaAnthroposBenevolentia/gemini-2-live-api-demo
//MIT License : https://github.com/ViaAnthroposBenevolentia/gemini-2-live-api-demo/blob/main/LICENSE
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini 2.0 Flash Multimodal Live API Client</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="css/style.css">
    <script src="js/edge_tts_chunk.js"></script>
    <script>
document.addEventListener('DOMContentLoaded', function() {
    const logsList = document.getElementById("logs-container");
    const msgList = document.getElementById("msg-list");
    const video_container = document.getElementById("video-container");
    // 初始设置
    logsList.style.cursor = 'pointer'; // 手形光标
    msgList.style.cursor = 'default';  // 默认光标
    video_container.addEventListener('click', function() {
        // 检查元素是否已经应用了 height: inherit
        if (video_container.style.height  === '250px') {
            // 移除 height: inherit
            video_container.style.height = '400px';
            msgList.style.height = '100px';
        } else {
            // 设置 height: inherit
            video_container.style.height = '250px';
            msgList.style.height = '250px';
        }
    });
    // logsList.addEventListener('click', function() {
    //     logsList.style.height = '250px';
    //     msgList.style.height = '1ch';
    //     logsList.style.cursor = 'default'; // 默认光标
    //     msgList.style.cursor = 'pointer'; // 手形光标
    // });

    // msgList.addEventListener('click', function() {
    //     // logsList.style.height = '1ch';
    //     msgList.style.height = '250px';
    //     video_container.style.height = '250px';
    //     logsList.style.cursor = 'pointer'; // 手形光标
    //     msgList.style.cursor = 'default'; // 默认光标
    // });
    
});

    </script>
</head>
<body>
    <div id="app">

        <div id="config-container" class="hidden-mobile">
            <div class="config-wrapper">
                <div class="setting-container">
                    <span class="setting-label">Sound: </span>
                    <select id="voice-select">
                        <option value="Puck">Puck (Male)</option>
                        <option value="Charon">Charon (Male)</option>
                        <option value="Fenrir">Fenrir (Male)</option>
                        <option value="Kore">Kore (Female)</option>
                        <option value="Aoede" selected>Aoede (Female)</option>
                    </select>
                </div>
                <div class="setting-container">
                    <span class="setting-label">Response Type: </span>
                    <select id="response-type-select">
                        <option value="text" selected>Text</option>
                        <option value="audio" >Audio</option>
                    </select>
                </div>
                <div class="setting-container">
                    <span class="setting-label">Video FPS: </span>
                    <input type="number" id="fps-input" placeholder="Video FPS" value="1" min="1" max="30" step="1"/>
                    <span class="fps-help">Higher FPS need more network bandwidth</span>
                </div>
                <textarea id="system-instruction" placeholder="Enter custom system instructions..." rows="6"></textarea>
                <button id="apply-config">Confirm</button>
            </div>
        </div>
        <div id="video-container" style="display: flex;">
            <video id="preview" playsinline autoplay muted></video>
            <div class="video-controls"style="display: flex; justify-content: center; width: 100%;">
                <button id="stop-video" style="display: none;">Stop Video</button>
                <button id="flip-camera"> 
                    <span class="material-symbols-outlined">flip_camera_ios</span>
                </button>
            </div>
        </div>

        <div id="msg-list">
            对话消息
            <div class="msg-div"></div>
        </div>
        <div id="logs-container" style="display: none;">系统消息</div>
        <div style="display: flex; justify-content: space-between;margin-bottom: 10px;">
        <input type="text" id="message-input" placeholder="Enter message...">
        <button id="send-button">Send</button>
        </div>
        <div class="settings">
        <button id="mic-button">
            <span id="mic-icon" class="material-symbols-outlined">mic</span>
        </button>
        <button id="connect-button">Connect</button>
        <button id="camera-button">
            <span id="camera-icon" class="material-symbols-outlined">videocam</span>
        </button>
        <button id="screen-button" style="display: none;">
            <span id="screen-icon" class="material-symbols-outlined">screen_share</span>
        </button>
        </div>
        <div class="audio-visualizers">
            <div class="visualizer-container">
                <label>Input Audio</label>
                <div id="input-audio-visualizer"></div>
            </div>
            <div class="visualizer-container" style="display: none;">
                <label>Output Audio</label>
                <div id="audio-visualizer"></div>
            </div>
        </div>
        <div class="settings">
            
            <input type="password" id="api-key" placeholder="Please Input Gemini API Key" />
            <button id="config-toggle" class="material-symbols-outlined">settings</button>
        </div>
        <div id="screen-container" style="display: none;">
            <video id="screen-preview" playsinline autoplay muted></video>
            <button class="close-button material-symbols-outlined">close</button>
        </div>
    </div>
    <script src="js/main.js" type="module"></script>
</body>
</html> 